<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>國泰 Health+ 生態圈 | 互動式簡報</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Serene Tech -->
    <!-- Application Structure Plan: 採用單頁滾動式敘事結構，引導評審逐步深入計畫核心。從宏觀社會問題（急迫性）開始，接著展示保險業困境，然後優雅地引出 Health+ 解決方案。透過互動式App模擬與多方效益分析，清晰傳達計畫價值。最後以人機協同策略和未來願景作結。此結構旨在建立情感共鳴與邏輯說服力，比傳統簡報分頁更具沉浸感和故事性，符合Apple風格的敘事體驗。 -->
    <!-- Visualization & Content Choices: 
        - 台灣高齡化趨勢 -> 目標: 建立急迫性 -> 視覺化: 動態折線圖 (Chart.js) -> 理由: 清晰呈現數據趨勢的嚴重性。
        - 保險惡性循環 -> 目標: 解釋核心商業痛點 -> 視覺化: CSS動畫圖解 -> 理由: 將複雜概念簡化為易懂的視覺故事。
        - Health+ App 功能 -> 目標: 展示核心產品 -> 視覺化: 互動式手機模型 -> 理由: 讓評審能模擬操作，直觀感受產品流程。
        - 多方共贏效益 -> 目標: 闡述價值主張 -> 視覺化: 互動分頁+甜甜圈圖/長條圖 (Chart.js) -> 理由: 讓評審可依角色自選探索，數據呈現更清晰。
        - 良性循環 -> 目標: 強化計畫的永續性 -> 視覺化: 全螢幕循環動畫圖 -> 理由: 以強烈視覺印象總結計畫的系統性優勢。
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F8F9FA;
            color: #212529;
        }
        .section-title {
            @apply text-4xl md:text-5xl font-bold text-gray-800 mb-4 tracking-tight;
        }
        .section-subtitle {
            @apply text-lg md:text-xl text-gray-500 max-w-3xl mx-auto;
        }
        .apple-card {
            @apply bg-white/80 backdrop-blur-sm rounded-3xl p-8 md:p-12 shadow-lg transition-all duration-300;
        }
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .nav-dot {
            @apply w-3 h-3 rounded-full bg-gray-300 transition-all duration-300 cursor-pointer;
        }
        .nav-dot.active {
            @apply bg-green-600 scale-125;
        }
        .phone {
            background: #111;
            border-radius: 40px;
            padding: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .phone-screen {
            background: #F8F9FA;
            border-radius: 30px;
            overflow: hidden;
            aspect-ratio: 9 / 19.5;
            position: relative;
        }
        .tab-button {
            @apply px-6 py-3 text-lg font-medium rounded-full transition-all duration-300;
        }
        .tab-button.active {
            @apply bg-green-600 text-white shadow-md;
        }
        .benefit-card {
            @apply bg-white p-6 rounded-2xl shadow-sm;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
         @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <nav id="side-nav" class="fixed top-1/2 right-4 md:right-8 -translate-y-1/2 z-50 flex flex-col space-y-4">
    </nav>

    <main>
        <section id="intro" class="h-screen w-screen flex flex-col justify-center items-center text-center p-8 relative">
            <div class="absolute inset-0 bg-grid-gray-200/[0.6] [mask-image:radial-gradient(ellipse_at_center,white,transparent_80%)]"></div>
            <div class="relative z-10">
                <h1 class="text-5xl md:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-600 to-teal-500 mb-4">國泰 Health+ 生態圈</h1>
                <p class="text-xl md:text-2xl text-gray-600">一份迎向未來的健康永續提案</p>
                <div class="mt-12 text-gray-500 animate-bounce">
                    <span class="text-sm">向下捲動以探索</span>
                    <svg class="w-6 h-6 mx-auto mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
            </div>
        </section>

        <section id="problem" class="min-h-screen py-20 px-8 flex flex-col justify-center items-center text-center">
            <div class="fade-in">
                <p class="text-green-600 font-semibold mb-2">無法迴避的未來</p>
                <h2 class="section-title">台灣正快速駛向超高齡社會</h2>
                <p class="section-subtitle mb-12">這不只是數字，而是對社會結構、醫療體系與每個家庭的深刻衝擊。</p>
            </div>
            <div class="w-full max-w-5xl fade-in">
                <div class="apple-card">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">高齡人口與扶養比的雙重壓力</h3>
                    <p class="text-gray-600 mb-6">2025年，台灣將進入超高齡社會，每3.4位青壯年需扶養1位長者。</p>
                    <div class="chart-container h-[40vh] md:h-96">
                        <canvas id="agingChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="vicious-cycle" class="min-h-screen py-20 px-8 flex flex-col justify-center items-center text-center">
             <div class="fade-in">
                <p class="text-green-600 font-semibold mb-2">壓力下的體系</p>
                <h2 class="section-title">傳統保險的惡性循環</h2>
                <p class="section-subtitle mb-12">高風險族群推高保費，健康的年輕人望之卻步，使風險池失衡，陷入僵局。</p>
            </div>
            <div class="w-full max-w-4xl fade-in">
                <div class="apple-card flex flex-col md:flex-row items-center justify-around gap-8">
                    <div class="w-full md:w-1/2 space-y-4">
                        <h3 class="text-2xl font-bold text-gray-800">風險池的失衡</h3>
                        <p class="text-gray-600">當健康的活水無法流入，保險的社會契約便開始動搖。</p>
                    </div>
                    <div id="cycle-animation" class="w-full md:w-1/2 h-64 flex flex-col items-center justify-center space-y-4 relative">
                        <div class="flex items-end justify-center w-full h-24">
                            <div id="pool-old" class="h-12 w-16 bg-red-300 rounded-t-lg flex items-center justify-center transition-all duration-1000">🧓</div>
                            <div id="pool-young" class="h-12 w-16 bg-green-300 rounded-t-lg flex items-center justify-center transition-all duration-1000">🧑</div>
                        </div>
                        <div class="w-48 h-2 bg-gray-300 rounded-full"></div>
                        <p id="cycle-text" class="text-lg font-semibold text-gray-700 transition-opacity duration-500">一個平衡的風險池</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="solution" class="min-h-screen py-20 px-8 flex flex-col justify-center items-center text-center">
            <div class="fade-in">
                <p class="text-green-600 font-semibold mb-2">範式轉移</p>
                <h2 class="section-title">不只事後理賠，更是健康夥伴</h2>
                <p class="section-subtitle mb-12">國泰 Health+ 透過高頻互動的 App，將保險從被動支付者，轉型為主動的健康生活引導者。</p>
            </div>
            <div class="w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 gap-12 items-center fade-in">
                <div class="order-2 md:order-1 text-left space-y-6">
                     <div id="solution-step-1" class="solution-step opacity-20 transition-opacity duration-500">
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">生活即數據 (Live & Record)</h3>
                        <p class="text-gray-600">透過穿戴裝置與手機，安全地記錄您的步數、睡眠與飲食，將抽象的健康化為具體的數據。</p>
                    </div>
                    <div id="solution-step-2" class="solution-step opacity-20 transition-opacity duration-500">
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">獎勵健康行 (Reward)</h3>
                        <p class="text-gray-600">每一個健康行為，都能轉化為有價的「小樹點」，讓您的努力得到實質回饋。</p>
                    </div>
                     <div id="solution-step-3" class="solution-step opacity-20 transition-opacity duration-500">
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">正向循環 (Improve)</h3>
                        <p class="text-gray-600">累積的點數可折抵保費或兌換商品，激勵您持續進步，形成健康、保障與獎勵的良性循環。</p>
                    </div>
                </div>
                <div class="order-1 md:order-2 flex justify-center">
                    <div class="phone w-full max-w-xs">
                        <div class="phone-screen p-6 flex flex-col">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-2xl font-bold text-gray-800">Health+</h3>
                                <div class="w-10 h-10 bg-green-200 rounded-full flex items-center justify-center text-green-700 font-bold">Cathay</div>
                            </div>
                            <div id="phone-content" class="flex-grow flex flex-col justify-center items-center text-center space-y-4">
                                <!-- JS 會更新這裡的內容 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="benefits" class="min-h-screen py-20 px-8 flex flex-col justify-center items-center text-center">
            <div class="fade-in">
                 <p class="text-green-600 font-semibold mb-2">良性循環</p>
                <h2 class="section-title">創造用戶、國泰與社會的三贏局面</h2>
                <p class="section-subtitle mb-12">一個平衡的生態系，為所有參與者創造可持續的價值。</p>
            </div>
            <div class="w-full max-w-5xl fade-in">
                <div class="flex justify-center mb-8">
                    <div id="tabs" class="bg-gray-200 rounded-full p-2 flex space-x-2">
                        <button data-tab="user" class="tab-button active">為您 (用戶)</button>
                        <button data-tab="cathay" class="tab-button">為國泰</button>
                        <button data-tab="society" class="tab-button">為社會</button>
                    </div>
                </div>
                <div id="tab-content" class="apple-card">
                    <!-- JS 會更新這裡的內容 -->
                </div>
            </div>
        </section>
        
        <section id="agents" class="min-h-screen py-20 px-8 flex flex-col justify-center items-center text-center">
            <div class="fade-in">
                <p class="text-green-600 font-semibold mb-2">人性的連結</p>
                <h2 class="section-title">業務員轉型：從銷售到健康顧問</h2>
                <p class="section-subtitle mb-12">科技並非取代人力，而是賦能人力。我們打造了「人機協同」的服務新模式，提供有溫度的數位體驗。</p>
            </div>
            <div class="w-full max-w-6xl fade-in">
                <div class="apple-card grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="text-left">
                        <h3 class="text-3xl font-bold text-gray-800 mb-4">顧問的數位工具箱</h3>
                        <p class="text-gray-600 mb-6">我們為業務員打造專屬儀表板，讓他們能以數據為基礎，提供更專業、高效且個人化的關懷與服務。</p>
                        <ul class="space-y-4 text-gray-700">
                            <li class="flex items-start">
                                <span class="text-green-500 mr-3 mt-1">✔</span>
                                <div><strong class="font-semibold">客戶參與度總覽：</strong>在保護隱私下，了解客戶活躍度，提供適時關懷。</div>
                            </li>
                             <li class="flex items-start">
                                <span class="text-green-500 mr-3 mt-1">✔</span>
                                <div><strong class="font-semibold">自動化溝通：</strong>設定關懷觸發器，高效維護客戶關係。</div>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-500 mr-3 mt-1">✔</span>
                                <div><strong class="font-semibold">個人化保單模擬器：</strong>將健康行為的價值具象化，讓客戶看見努力的回報。</div>
                            </li>
                        </ul>
                    </div>
                    <div class="bg-gray-100 rounded-2xl p-6 shadow-inner">
                        <h4 class="font-bold text-lg mb-4 text-gray-700">顧問儀表板 (模擬)</h4>
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg">
                                <p class="text-sm text-gray-500">客戶活躍度</p>
                                <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                                  <div class="bg-green-500 h-2.5 rounded-full" style="width: 80%"></div>
                                </div>
                                <p class="text-right text-sm text-gray-600 mt-1">80% 已啟用App</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg">
                                <p class="text-sm text-gray-500">本週挑戰達成</p>
                                <p class="text-2xl font-bold text-gray-800">15 <span class="text-base font-normal text-gray-500">位客戶</span></p>
                            </div>
                            <div class="bg-white p-4 rounded-lg">
                                <p class="text-sm text-gray-500">待關懷客戶</p>
                                <p class="text-2xl font-bold text-gray-800">5 <span class="text-base font-normal text-gray-500">位客戶</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="vision" class="h-screen w-screen flex flex-col justify-center items-center text-center p-8 bg-gray-800 text-white">
            <div class="fade-in">
                <p class="text-green-400 font-semibold mb-2">我們的願景</p>
                <h2 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight">啟動良性循環</h2>
                <p class="text-lg md:text-xl text-gray-300 max-w-3xl mx-auto mb-12">投資一個更健康、更公平、更永續的台灣</p>
            </div>
            <div id="final-cycle" class="w-full max-w-2xl h-64 relative flex items-center justify-center fade-in">
                <!-- JS 會在這裡創建循環動畫 -->
            </div>
            <div class="fade-in mt-12">
                 <h3 class="text-2xl font-bold">誠摯邀請您，與我們共同前行。</h3>
            </div>
        </section>

    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
    
        let agingChartInstance = null;
        let userChartInstance = null;
        let cathayChartInstance = null;

        const sections = document.querySelectorAll('section');
        const navContainer = document.getElementById('side-nav');
        const navDots = [];

        sections.forEach(section => {
            const dot = document.createElement('div');
            dot.classList.add('nav-dot');
            dot.dataset.section = section.id;
            dot.setAttribute('title', section.id);
            dot.addEventListener('click', () => {
                section.scrollIntoView({ behavior: 'smooth' });
            });
            navContainer.appendChild(dot);
            navDots.push(dot);
        });

        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.5
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                const animatedElement = entry.target.querySelector('.fade-in') || entry.target;
                if (entry.isIntersecting) {
                    animatedElement.classList.add('is-visible');
                    
                    const activeDot = navContainer.querySelector(`[data-section="${entry.target.id}"]`);
                    navDots.forEach(d => d.classList.remove('active'));
                    if(activeDot) activeDot.classList.add('active');

                    if (entry.target.id === 'problem' && !entry.target.dataset.chartRendered) {
                        renderAgingChart();
                        entry.target.dataset.chartRendered = true;
                    }
                     if (entry.target.id === 'vicious-cycle' && !entry.target.dataset.animRendered) {
                        startCycleAnimation();
                        entry.target.dataset.animRendered = true;
                    }
                    if (entry.target.id === 'solution' && !entry.target.dataset.animRendered) {
                        startSolutionAnimation();
                        entry.target.dataset.animRendered = true;
                    }
                     if (entry.target.id === 'benefits' && !entry.target.dataset.chartRendered) {
                        switchTab('user');
                        entry.target.dataset.chartRendered = true;
                    }
                    if (entry.target.id === 'vision' && !entry.target.dataset.animRendered) {
                        renderFinalCycle();
                        entry.target.dataset.animRendered = true;
                    }
                }
            });
        }, observerOptions);
        
        document.querySelectorAll('section, .fade-in').forEach(el => observer.observe(el));


        function renderAgingChart() {
            if (agingChartInstance) {
                agingChartInstance.destroy();
            }
            const ctx = document.getElementById('agingChart').getContext('2d');
            agingChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2018', '2025', '2030', '2040', '2050'],
                    datasets: [{
                        label: '高齡人口比例 (%)',
                        data: [14.1, 20.8, 25.5, 34.3, 38.9],
                        borderColor: 'rgb(22, 163, 74)',
                        backgroundColor: 'rgba(22, 163, 74, 0.1)',
                        fill: true,
                        tension: 0.4,
                    }, {
                        label: '青壯年扶養長者數 (每位)',
                        data: [0.16, 0.29, 0.40, 0.65, 0.81],
                        borderColor: 'rgb(239, 68, 68)',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        fill: true,
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '高齡人口比例 (%)' }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                              drawOnChartArea: false,
                            },
                            title: { display: true, text: '扶養比' }
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        if (context.datasetIndex === 0) {
                                            label += context.parsed.y + '%';
                                        } else {
                                             label += `每 ${Math.round(1/context.parsed.y)} 人扶養 1 位`;
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                     animation: {
                        duration: 1500,
                        easing: 'easeInOutQuad'
                    }
                }
            });
        }
        
        function startCycleAnimation(){
            const poolOld = document.getElementById('pool-old');
            const poolYoung = document.getElementById('pool-young');
            const cycleText = document.getElementById('cycle-text');

            setTimeout(() => {
                cycleText.textContent = '高齡、高風險用戶增加...';
                cycleText.classList.add('text-red-500');
                poolOld.style.height = '6rem'; 
            }, 1000);
             setTimeout(() => {
                cycleText.textContent = '導致保費上漲...';
                cycleText.classList.remove('text-red-500');
                cycleText.classList.add('text-yellow-500');
            }, 2500);
            setTimeout(() => {
                cycleText.textContent = '健康的年輕人被勸退...';
                cycleText.classList.remove('text-yellow-500');
                cycleText.classList.add('text-blue-500');
                poolYoung.style.height = '1.5rem';
            }, 4000);
            setTimeout(() => {
                cycleText.textContent = '風險池失衡，陷入惡性循環。';
                 cycleText.classList.remove('text-blue-500');
                cycleText.classList.add('text-red-700');
                poolOld.style.height = '7rem';
                poolYoung.style.height = '1rem';
            }, 5500);
        }

        const phoneContentEl = document.getElementById('phone-content');
        const solutionSteps = document.querySelectorAll('.solution-step');
        let solutionInterval;
        function startSolutionAnimation() {
            if (solutionInterval) clearInterval(solutionInterval);

            const contents = [
                { icon: '🏃‍♂️', title: '記錄您的步數', text: '每日一萬步，健康更有數' },
                { icon: '🛌', title: '監測您的睡眠', text: '優質睡眠，活力每一天' },
                { icon: '🥗', title: '管理您的飲食', text: '均衡營養，身體更輕盈' },
                { icon: '🌳', title: '賺取小樹點', text: '健康變現，兌換多元好禮' },
            ];
            let currentIndex = 0;
            
            function updatePhoneContent() {
                const stepIndex = Math.floor(currentIndex / 2);

                solutionSteps.forEach((step, index) => {
                    step.style.opacity = index <= stepIndex ? '1' : '0.2';
                });

                const content = contents[currentIndex % contents.length];
                phoneContentEl.innerHTML = `
                    <div class="text-6xl mb-4 animate-pulse">${content.icon}</div>
                    <h4 class="text-xl font-bold text-gray-800">${content.title}</h4>
                    <p class="text-gray-500">${content.text}</p>
                `;
                currentIndex++;
            }
            updatePhoneContent();
            solutionInterval = setInterval(updatePhoneContent, 2500);
        }
        
        const tabs = document.getElementById('tabs');
        const tabContent = document.getElementById('tab-content');
        const tabData = {
            user: {
                title: '您的健康，您的獎勵',
                content: `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div class="text-left space-y-4">
                            <div class="benefit-card">
                                <h4 class="font-bold text-lg">賺取你的折扣</h4>
                                <p class="text-gray-600">透過健康行為賺取「小樹點」，直接折抵保費，保險不再是負擔。</p>
                            </div>
                             <div class="benefit-card">
                                <h4 class="font-bold text-lg">健康化為獎勵</h4>
                                <p class="text-gray-600">點數可兌換加油、購物金等，讓您的健康努力更有價值。</p>
                            </div>
                             <div class="benefit-card">
                                <h4 class="font-bold text-lg">發揮利他影響力</h4>
                                <p class="text-gray-600">可將點數捐贈給弱勢群體，購買微型保險，讓善意循環。</p>
                            </div>
                        </div>
                        <div class="chart-container h-72 md:h-80"><canvas id="userBenefitChart"></canvas></div>
                    </div>`
            },
            cathay: {
                title: '一個更健康的商業模式',
                content: `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div class="chart-container h-72 md:h-80"><canvas id="cathayBenefitChart"></canvas></div>
                        <div class="text-left space-y-4">
                            <div class="benefit-card">
                                <h4 class="font-bold text-lg">精準核保與定價</h4>
                                <p class="text-gray-600">以動態健康數據取代靜態資料，更公平地評估風險。</p>
                            </div>
                             <div class="benefit-card">
                                <h4 class="font-bold text-lg">降低理賠損失</h4>
                                <p class="text-gray-600">更健康的保戶群體，從源頭降低理賠成本。</p>
                            </div>
                             <div class="benefit-card">
                                <h4 class="font-bold text-lg">獲客與留存提升</h4>
                                <p class="text-gray-600">吸引年輕低風險客群，並透過高頻互動提升客戶忠誠度。</p>
                            </div>
                        </div>
                    </div>`
            },
            society: {
                title: '一個更永續的台灣',
                content: `
                    <div class="text-center space-y-4">
                       <h4 class="font-bold text-2xl text-gray-800">減輕健保財政負擔</h4>
                       <p class="text-gray-600 max-w-2xl mx-auto">當國民更健康，對公共醫療資源的依賴便會降低，讓資源能用在最需要的地方。這是一個由市場驅動，創造巨大社會價值的公私協力典範。</p>
                        <div class="pt-6">
                            <label for="adoption-rate" class="block mb-2 font-medium text-gray-700">Health+ 採納率模擬</label>
                            <input id="adoption-rate" type="range" min="0" max="100" value="10" class="w-full max-w-md h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <div class="mt-4 flex items-center justify-center space-x-4">
                               <span class="text-3xl">🏥</span>
                               <div class="w-48 bg-gray-200 rounded-full h-4">
                                 <div id="burden-bar" class="bg-red-500 h-4 rounded-full transition-all duration-300" style="width: 90%;"></div>
                               </div>
                               <span id="burden-text" class="font-bold text-red-500">健保負擔：高</span>
                            </div>
                        </div>
                    </div>`
            }
        };

        function switchTab(tabName) {
            tabs.querySelectorAll('button').forEach(btn => {
                btn.classList.remove('active');
                if(btn.dataset.tab === tabName) btn.classList.add('active');
            });
            tabContent.innerHTML = tabData[tabName].content;
            
            if (tabName === 'user') renderUserBenefitChart();
            if (tabName === 'cathay') renderCathayBenefitChart();
            if (tabName === 'society') setupSocietySlider();
        }

        tabs.addEventListener('click', e => {
            if (e.target.tagName === 'BUTTON') {
                switchTab(e.target.dataset.tab);
            }
        });
        
        function renderUserBenefitChart() {
            if (userChartInstance) {
                userChartInstance.destroy();
            }
            setTimeout(() => {
                const ctx = document.getElementById('userBenefitChart')?.getContext('2d');
                if (!ctx) return;
                userChartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['保費折抵', '消費兌換', '公益捐贈'],
                        datasets: [{
                            label: '小樹點價值分配',
                            data: [50, 40, 10],
                            backgroundColor: ['rgb(22, 163, 74)', 'rgb(5, 150, 105)', 'rgb(13, 148, 136)'],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                         plugins: { legend: { position: 'bottom' } },
                         animation: { animateScale: true, animateRotate: true, duration: 1200 }
                    }
                });
            }, 100);
        }

        function renderCathayBenefitChart() {
            if (cathayChartInstance) {
                cathayChartInstance.destroy();
            }
            setTimeout(() => {
                const ctx = document.getElementById('cathayBenefitChart')?.getContext('2d');
                if (!ctx) return;
                cathayChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['獲客成本 (CAC)', '理賠損失率', '客戶終身價值 (LTV)'],
                        datasets: [{
                            label: '傳統模式',
                            data: [100, 100, 100],
                             backgroundColor: 'rgb(209, 213, 219)',
                        },{
                            label: 'Health+ 模式',
                            data: [80, 90, 125],
                            backgroundColor: 'rgb(22, 163, 74)',
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { ticks: { callback: (value) => value + '%' } }
                        },
                        plugins: { 
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let value = context.parsed.x;
                                        if (context.datasetIndex === 1) {
                                            let change = value - 100;
                                            return `預期表現: ${value}% (${change > 0 ? '+' : ''}${change}%)`;
                                        }
                                        return `基準: ${value}%`;
                                    }
                                }
                            }
                        },
                        animation: {
                            duration: 1500,
                            easing: 'easeInOutQuad'
                        }
                    }
                });
            }, 100);
        }

        function setupSocietySlider() {
            const slider = document.getElementById('adoption-rate');
            const bar = document.getElementById('burden-bar');
            const text = document.getElementById('burden-text');
            if (!slider) return;
            slider.addEventListener('input', (e) => {
                const value = e.target.value;
                const burden = 100 - value * 0.7;
                bar.style.width = `${burden}%`;
                if(burden < 50) {
                    bar.classList.remove('bg-red-500', 'bg-yellow-500');
                    bar.classList.add('bg-green-500');
                    text.textContent = '健保負擔：低';
                    text.classList.remove('text-red-500', 'text-yellow-500');
                    text.classList.add('text-green-500');
                } else if (burden < 80) {
                    bar.classList.remove('bg-red-500', 'bg-green-500');
                    bar.classList.add('bg-yellow-500');
                    text.textContent = '健保負擔：中';
                    text.classList.remove('text-red-500', 'text-green-500');
                    text.classList.add('text-yellow-500');
                } else {
                     bar.classList.remove('bg-yellow-500', 'bg-green-500');
                    bar.classList.add('bg-red-500');
                    text.textContent = '健保負擔：高';
                    text.classList.remove('text-yellow-500', 'text-green-500');
                    text.classList.add('text-red-500');
                }
            });
        }
        
        function renderFinalCycle() {
            const container = document.getElementById('final-cycle');
            if (container.children.length > 0) return;

            const items = [
                { text: '更健康的用戶', icon: '❤️' },
                { text: '國泰風險降低', icon: '🛡️' },
                { text: '政府負擔減輕', icon: '🏥' },
                { text: '用戶回饋更佳', icon: '💰' },
                { text: '吸引更多用戶', icon: '👥' },
            ];

            const radius = 100;
            items.forEach((item, i) => {
                const angle = (i / items.length) * 2 * Math.PI - (Math.PI / 2);
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);

                const node = document.createElement('div');
                node.className = 'absolute flex flex-col items-center transition-all duration-700 opacity-0';
                node.style.transform = `translate(${x}px, ${y}px) scale(0.8)`;
                node.innerHTML = `
                    <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-3xl mb-2">${item.icon}</div>
                    <p class="text-sm font-medium text-center">${item.text}</p>
                `;
                container.appendChild(node);

                setTimeout(() => {
                    node.style.opacity = '1';
                    node.style.transform = `translate(${x}px, ${y}px) scale(1)`;
                }, i * 300);

                 setTimeout(() => {
                    const nodes = container.querySelectorAll('div.absolute');
                    let animationInterval;
                    if(animationInterval) clearInterval(animationInterval);
                    animationInterval = setInterval(() => {
                        const activeIndex = Math.floor((Date.now() / 1500) % items.length);
                        nodes.forEach((n, index) => {
                            if (index === activeIndex) {
                                n.classList.add('scale-110', 'shadow-lg');
                                n.querySelector('div').classList.add('bg-green-400');
                            } else {
                                n.classList.remove('scale-110', 'shadow-lg');
                                 n.querySelector('div').classList.remove('bg-green-400');
                            }
                        });
                    }, 100);
                }, items.length * 300);
            });
        }
    });
    </script>
</body>
</html>
